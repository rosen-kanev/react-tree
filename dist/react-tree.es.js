var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,d=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&o(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&o(e,r,t[r]);return e},i=(e,n)=>t(e,r(n));import c,{createContext as s,useContext as u,useRef as f}from"react";const p=s({selected:null,focused:null,expanded:[],onItemSelect(){},renderLabel(){}});p.displayName="TreeContext";const m=e=>{const{selected:t,focused:r,expanded:n,onItemSelect:l,renderLabel:a}=u(p),o=e.nodes.length>0,s=o?n.includes(e.id):null;return c.createElement("li",{role:"treeitem",tabIndex:r===e.id?0:-1,"aria-expanded":s,"aria-selected":t===e.id||null,"data-id":`treeitem-${e.id}`},"function"==typeof a?a(d({isExpanded:s,isExpandable:o,toggleItem(){l(e.id,o)}},e)):c.createElement("div",{onClick:()=>l(e.id,o)},e.label),s&&o&&c.createElement("ul",{role:"group"},e.nodes.map((e=>c.createElement(m,i(d({},e),{key:e.id}))))))};function b(e){var t=e,{nodes:r,selected:o,focused:s,onFocusChange:u,expanded:b,onExpandChange:x,onSelect:y,renderLabel:E}=t,v=((e,t)=>{var r={};for(var o in e)l.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&n)for(var o of n(e))t.indexOf(o)<0&&a.call(e,o)&&(r[o]=e[o]);return r})(t,["nodes","selected","focused","onFocusChange","expanded","onExpandChange","onSelect","renderLabel"]);const g=f(null),h=(e,t)=>{t&&x(b.includes(e)?b.filter((t=>t!==e)):b.concat(e)),u(e),y(e)},k=e=>{const t=g.current.querySelectorAll('[role="treeitem"]');let r;for(let n=0;n<t.length;n++){if(0===t[n].tabIndex){r=e?t[n-1]:t[n+1];break}}if(r){const e=r.dataset.id.replace("treeitem-","");u(e),r.focus(),r.firstElementChild.scrollIntoView({block:"center"})}},w=e=>{const t=g.current.querySelector(`[data-id="treeitem-${e}"]`);return{treeItem:t,isExpandable:t.hasAttribute("aria-expanded"),isExpanded:"true"===t.getAttribute("aria-expanded")}},I=e=>{if(e){e.focus(),e.firstElementChild.scrollIntoView({block:"center"});const t=e.dataset.id.replace("treeitem-","");u(t)}};return c.createElement(p.Provider,{value:{selected:o,focused:s,expanded:b,onItemSelect:h,renderLabel:E}},c.createElement("ul",i(d({ref:g,role:"tree"},v),{onKeyDown:e=>{if(r.length&&!e.altKey&&!e.ctrlKey&&!e.metaKey)if("ArrowUp"===e.key)e.preventDefault(),k(!0);else if("ArrowDown"===e.key)e.preventDefault(),k(!1);else if("ArrowLeft"===e.key){e.preventDefault();const{treeItem:t,isExpandable:r,isExpanded:n}=w(s);r&&n?x(b.filter((e=>e!==s))):I(t.closest('[role="treeitem"]:not([tabindex="0"])'))}else if("ArrowRight"===e.key){e.preventDefault();const{treeItem:t,isExpandable:r,isExpanded:n}=w(s);r&&(n?I(t.querySelector('[role="treeitem"]')):x(b.concat(s)))}else if("Enter"===e.key||" "===e.key){e.preventDefault();const t=g.current.querySelector(`[data-id="treeitem-${s}"]`).hasAttribute("aria-expanded");h(s,t)}}}),r.map((e=>c.createElement(m,i(d({},e),{key:e.id}))))))}export default b;
